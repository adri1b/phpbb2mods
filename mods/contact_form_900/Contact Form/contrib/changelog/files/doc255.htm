<body onunload=exit()><form method="POST">  <p align="center"><i><font size="3">Difference Analysis Generated by   <a href="http://www.ComponentSoftware.com/products/htmldiff" target="_blank">HtmlDiff</a> on  03/07/2007 19:10</font></i>&nbsp;&nbsp;
  <input type="button" value="Navigate Changes" name="Navigate" onclick=pop_navigate()></p></form></body> <p align="left"><font size="4"><b>Base file: C:\Documents and Settings\Ma®©uS\Desktop\v8\Contact Form\root\admin\admin_contact.php</b></font></p> <p align="left"><font size="4"><b>Modified file: C:\Documents and Settings\Ma®©uS\Desktop\v9\Contact Form\root\admin\admin_contact.php</b></font></p><html>
<style type="text/css">
<!--
.HDNormal {  color: #000000;background:  #ffffff;text-decoration:none}
.HDDeleted {  color: #ff0000;background:  #ffffff;text-decoration:line-through}
.HDAdded {  color: #000000;background:  #ffff00;text-decoration:none}
-->
</style>
<body>
<pre>
 <span class="HDNormal">
&lt;?php
/***************************************************************************
 *                              admin_contact.php
 *                             -------------------
 *  Version:    <a name="diff" id="c0"><span class="HDDeleted">8.6</span></a><span class="HDAdded">9.0</span>.0
 *  Begin:      Sunday, Sept 17, 2006
 *      Copyright:  (C) 2006<a name="diff" id="c1"><span class="HDAdded">-07</span></a>, Marcus
 *  E-mail:     marcus@phobbia.net
 *  $id:        <a name="diff" id="c2"><span class="HDDeleted">06:59 08/03</span></a><span class="HDAdded">21:20 01/06</span>/2007
 *
 ***************************************************************************/

define('IN_PHPBB', true);

if(!empty($setmodules))
{
    $file = basename(__FILE__);
    $module['General']['Contact<a name="diff" id="c3"><span class="HDDeleted"> </span></a><span class="HDAdded">_</span>Form'] = $file;
    return;
}

//
// Let's set the root dir for phpBB
//
$phpbb_root_path = './../';
include($phpbb_root_path . 'extension.inc');
include('./pagestart.'.$phpEx);
include($phpbb_root_path . 'language/lang_' . $board_config['default_lang'] . '/lang_contact.'.$phpEx);

//
// Pull all config data
//
$sql = "SELECT *
    FROM " . CONTACT_CONFIG_TABLE;

<a name="diff" id="c4"><span class="HDDeleted">    </span></a>if(!$result = $db-&gt;sql_query($sql))
<span class="HDDeleted">    </span>{
    <span class="HDDeleted">    </span>message_die(CRITICAL_ERROR, <span class="HDDeleted">"</span><span class="HDAdded">'</span>Could not query contact config information<span class="HDDeleted">", ""</span><span class="HDAdded">', ''</span>, __LINE__, __FILE__, $sql);
<span class="HDDeleted">    </span>}
<span class="HDDeleted">    </span>else
<span class="HDDeleted">    </span>{
        while($row = $db-&gt;sql_fetchrow($result))
        {
            $contact_config[$row['config_name']] = $row['config_value'];
            $config_name = $row['config_name'];
            $config_value = $row['config_value'];

            $default_config[$config_name] = isset($HTTP_POST_VARS['submit']) ? str_replace("'", "\'", $config_value) : $config_value;
        
            $new[$config_name] = (isset($HTTP_POST_VARS[$config_name])) ? $HTTP_POST_VARS[$config_name] : $default_config[$config_name];

            if(isset($HTTP_POST_VARS['submit']))
            {
                $sql = "UPDATE " . CONTACT_CONFIG_TABLE . "
                    SET config_value = '" . str_replace("\'", "''", $new[$config_name]) . "'
                    WHERE config_name = '$config_name'";

                if(!$db-&gt;sql_query($sql))
                {
                <a name="diff" id="c5"><span class="HDDeleted">    </span></a>message_die(GENERAL_ERROR, <span class="HDDeleted">"</span><span class="HDAdded">'</span>Failed to update general configuration for $config_name<span class="HDDeleted">", ""</span><span class="HDAdded">', ''</span>, __LINE__, __FILE__, $sql);
                }
            }
        }

    if(isset($HTTP_POST_VARS['submit']))
    {
        $message = $lang['Contact_updated'] . "&lt;br /&gt;&lt;br /&gt;" . sprintf($lang['Click_return_contact'], "&lt;a href=\"" . append_sid("admin_contact.$phpEx") . "\"&gt;", "&lt;/a&gt;") . "&lt;br /&gt;&lt;br /&gt;" . sprintf($lang['Click_return_admin_index'], "&lt;a href=\"" . append_sid("index.$phpEx?pane=right") . "\"&gt;", "&lt;/a&gt;");
<a name="diff" id="c6"><span class="HDDeleted">
</span></a>        message_die(GENERAL_MESSAGE, $message);
    }
}

// Contact Captcha
define('CAPTCHA_TYPE_IMAGE', 0);
define('CAPTCHA_TYPE_COLOURED', 1);
define('CAPTCHA_TYPE_RANDOM', 2);

<a name="diff" id="c7"><span class="HDAdded">// Thank You Options
define('DISABLE_THANKYOU', 0);
define('REGONLY_THANKYOU', 1);
define('ALL_THANKYOU', 2);

</span></a>$form_enable_yes = ($new['contact_form_enable']) ? "checked=\"checked\"" : "";
$form_enable_no =  (!$new['contact_form_enable']) ? "checked=\"checked\"" : "";

$hash_yes = ($new['contact_hash']) ? "checked=\"checked\"" : "";
$hash_no =  (!$new['contact_hash']) ? "checked=\"checked\"" : "";

$prune_yes = ($new['contact_prune']) ? "checked=\"checked\"" : "";
$prune_no = (!$new['contact_prune']) ? "checked=\"checked\"" : "";

$require_rname_yes = ($new['contact_require_rname']) ? "checked=\"checked\"" : "";
$require_rname_no = (!$new['contact_require_rname']) ? "checked=\"checked\"" : "";

$require_email_yes = ($new['contact_require_email']) ? "checked=\"checked\"" : "";
$require_email_no = (!$new['contact_require_email']) ? "checked=\"checked\"" : "";

$require_comments_yes = ($new['contact_require_comments']) ? "checked=\"checked\"" : "";
$require_comments_no = (!$new['contact_require_comments']) ? "checked=\"checked\"" : "";

$permit_attachments_yes = ($new['contact_permit_attachments']) ? "checked=\"checked\"" : "";
$permit_attachments_no = (!$new['contact_permit_attachments']) ? "checked=\"checked\"" : "";

$contact_auth_guest_yes = ($new['contact_auth_guest']) ? "checked=\"checked\"" : "";
$contact_auth_guest_no = (!$new['contact_auth_guest']) ? "checked=\"checked\"" : "";

$contact_auth_user_yes = ($new['contact_auth_user']) ? "checked=\"checked\"" : "";
$contact_auth_user_no = (!$new['contact_auth_user']) ? "checked=\"checked\"" : "";

$contact_auth_mod_yes = ($new['contact_auth_mod']) ? "checked=\"checked\"" : "";
$contact_auth_mod_no = (!$new['contact_auth_mod']) ? "checked=\"checked\"" : "";

$contact_auth_admin_yes = ($new['contact_auth_admin']) ? "checked=\"checked\"" : "";
$contact_auth_admin_no = (!$new['contact_auth_admin']) ? "checked=\"checked\"" : "";

$contact_captcha_yes = ( $new['contact_captcha'] ) ? "checked=\"checked\"" : "";
$contact_captcha_no = ( !$new['contact_captcha'] ) ? "checked=\"checked\"" : "";

$captcha_type_image = ( $new['contact_captcha_type'] == CAPTCHA_TYPE_IMAGE ) ? "checked=\"checked\"" : "";
$captcha_type_colour = ( $new['contact_captcha_type'] == CAPTCHA_TYPE_COLOURED ) ? "checked=\"checked\"" : "";
$captcha_type_random = ( $new['contact_captcha_type'] == CAPTCHA_TYPE_RANDOM ) ? "checked=\"checked\"" : "";

<a name="diff" id="c8"><span class="HDAdded">$contact_thank_none = ( $new['contact_thankyou'] == DISABLE_THANKYOU ) ? "checked=\"checked\"" : "";
$contact_thank_reg = ( $new['contact_thankyou'] == REGONLY_THANKYOU ) ? "checked=\"checked\"" : "";
$contact_thank_all = ( $new['contact_thankyou'] == ALL_THANKYOU ) ? "checked=\"checked\"" : "";

</span></a>$contact_delete_yes = ( $new['contact_delete'] ) ? "checked=\"checked\"" : "";
$contact_delete_no = ( !$new['contact_delete'] ) ? "checked=\"checked\"" : "";

$contact_storage_yes = ( $new['contact_storage'] ) ? "checked=\"checked\"" : "";
$contact_storage_no = ( !$new['contact_storage'] ) ? "checked=\"checked\"" : "";


$template-&gt;set_filenames(array(
    'body' =&gt; 'admin/contact_config_body.tpl')
);

$template-&gt;assign_vars(array(
    'L_VERSION' =&gt; sprintf($contact_config['contact_version']),

    'L_YES' =&gt; $lang['Yes'],
    'L_NO' =&gt; $lang['No'],
    'L_DISABLE' =&gt; $lang['Disable'],
    'L_ENABLE' =&gt; $lang['Enable'],

    'L_SUBMIT' =&gt; $lang['Submit'],
    'L_RESET' =&gt; $lang['Reset'],

    'L_ADMIN_EMAIL' =&gt; $lang['Admin_email'],
    'L_ADMIN_EMAIL_EXPLAIN' =&gt; $lang['Admin_email_explain'],

    'L_CONTACT_TITLE' =&gt; $lang['Contact_title'],
    'L_CONTACT_EXPLAIN' =&gt; $lang['Contact_explain'],
    'L_GENERAL_SETTINGS' =&gt; $lang['General_settings'],
    'L_REQ_SETTINGS' =&gt; $lang['Req_settings'],
    'L_REQUIRE_RNAME' =&gt; $lang['Require_rname'],
    'L_REQUIRE_EMAIL' =&gt; $lang['Require_email'],
    'L_REQUIRE_COMMENTS' =&gt; $lang['Require_comments'],

    'L_PERMIT_ATTACHMENTS' =&gt; $lang['Permit_attachments'],
    'L_ATTACHMENTS' =&gt; $lang['Attachment_settings'],
    'L_MAX_FILE_SIZE' =&gt; $lang['Max_file_size'],
    'L_MAX_FILE_SIZE_EXPLAIN' =&gt; sprintf($lang['Max_file_size_explain'], (@phpversion() &gt;= '4.0.0') ? ini_get('upload_max_filesize') : get_cfg_var('upload_max_filesize')),
    'L_FILE_ROOT' =&gt; $lang['File_root'],
    'L_FILE_ROOT_EXPLAIN' =&gt; $lang['File_root_explain'],

    'L_PRUNE' =&gt; $lang['Prune'],
    'L_PRUNE_EXPLAIN' =&gt; $lang['Prune_explain'],
    'L_FLOOD_LIMIT' =&gt; $lang['Flood_limit_admin'],
    'L_FLOOD_LIMIT_EXPLAIN' =&gt; $lang['Flood_limit_admin_explain'],
    'L_CHAR_LIMIT' =&gt; $lang['Char_limit_admin'],
    'L_CHAR_LIMIT_EXPLAIN' =&gt; $lang['Char_limit_admin_explain'],

    'L_HASH' =&gt; $lang['Hash'],
    'L_HASH_EXPLAIN' =&gt; $lang['Hash_explain'],
    'L_MD5' =&gt; $lang['md5'],
    'L_NO_HASH' =&gt; $lang['no_hash'],

    'L_DELETE' =&gt; $lang['QDelete'],
    'L_DELETE_EXPLAIN' =&gt; $lang['QDelete_explain'],

    'L_STORAGE' =&gt; $lang['Msg_Log'],
    'L_STORAGE_EXPLAIN' =&gt; $lang['Msg_Log_explain'],

    'L_KB' =&gt; $lang['kb'],
    'L_HOURS' =&gt; $lang['hours'],

    'L_AUTH_PERMISSION' =&gt; $lang['auth_permission'],
    'L_AUTH_PERMISSION_EXPLAIN' =&gt; $lang['auth_perm_explain'],

    'L_ANON' =&gt; $lang['auth_guests'],
    'L_USER' =&gt; $lang['auth_members'],
    'L_MOD' =&gt; $lang['auth_mods'],
    'L_ADMIN' =&gt; $lang['auth_admins'],

    'L_FORM_ENABLE' =&gt; $lang['Form_Enable'],

    'L_CAPTCHA_TITLE' =&gt; $lang['Captcha'],
    'L_ACTIVATE' =&gt; $lang['Activate'],
    'L_ACTIVATE_EXPLAIN' =&gt; $lang['Captcha_explain'],

    'L_CAPTCHA_TYPE' =&gt; $lang['Type'],
    'L_CAPTCHA_TYPE_EXPLAIN' =&gt; $lang['Type_explain'],
    'L_IMAGEBG' =&gt; $lang['Image_bg'],
    'L_COLOURED' =&gt; $lang['Coloured'],
    'L_RANDOM' =&gt; $lang['Random'],

<a name="diff" id="c9"><span class="HDAdded">    'L_THANKYOU_SETTINGS' =&gt; $lang['Thankyou_settings'],
    'L_THANKYOU_OPTION' =&gt; $lang['Thankyou_option'],
    'L_THANKYOU_EXPLAIN' =&gt; $lang['Thankyou_explain'],
    'L_THANK_NONE' =&gt; $lang['Thank_none'],
    'L_THANK_MEMBERS' =&gt; $lang['Thank_members'],
    'L_THANK_ALL' =&gt; $lang['Thank_all'],

    'THANK_NONE' =&gt; DISABLE_THANKYOU,
    'THANK_NONE_CHECKED' =&gt; $contact_thank_none,
    'THANK_MEMBERS' =&gt; REGONLY_THANKYOU,
    'THANK_MEMBERS_CHECKED' =&gt; $contact_thank_reg,
    'THANK_ALL' =&gt; ALL_THANKYOU,
    'THANK_ALL_CHECKED' =&gt; $contact_thank_all,

</span></a>    'TYPE_IMAGE' =&gt; CAPTCHA_TYPE_IMAGE, 
    'CAPTCHA_TYPE_IMAGE_CHECKED' =&gt; $captcha_type_image,
    'TYPE_COLOUR' =&gt; CAPTCHA_TYPE_COLOURED, 
    'CAPTCHA_TYPE_COLOUR_CHECKED' =&gt; $captcha_type_colour,
    'TYPE_RANDOM' =&gt; CAPTCHA_TYPE_RANDOM, 
    'CAPTCHA_TYPE_RANDOM_CHECKED' =&gt; $captcha_type_random,

    'ADMIN_EMAIL' =&gt; $contact_config['contact_admin_email'],
    'FLOOD_LIMIT' =&gt; $contact_config['contact_flood_limit'],
    'MAX_FILE_SIZE' =&gt; $contact_config['contact_max_file_size'],
    'FILE_ROOT' =&gt; $contact_config['contact_file_root'],
    'CHAR_LIMIT' =&gt; $contact_config['contact_char_limit'],

    'COPYRIGHT' =&gt; $lang['Copyright'],

    'S_CONFIG_ACTION' =&gt; append_sid('admin_contact.'.$phpEx),

    'S_FORM_ENABLE_YES' =&gt; $form_enable_yes,
    'S_FORM_ENABLE_NO' =&gt; $form_enable_no,
    'S_CAPTCHA_ENABLE' =&gt; $contact_captcha_yes,
    'S_CAPTCHA_DISABLE' =&gt; $contact_captcha_no,

    'S_DELETE_FILES_YES' =&gt; $contact_delete_yes,
    'S_DELETE_FILES_NO' =&gt; $contact_delete_no,

    'S_STORE_MSGS_YES' =&gt; $contact_storage_yes,
    'S_STORE_MSGS_NO' =&gt; $contact_storage_no,

    'S_HASH_YES' =&gt; $hash_yes,
    'S_HASH_NO' =&gt; $hash_no,
    'S_PRUNE_YES' =&gt; $prune_yes,
    'S_PRUNE_NO' =&gt; $prune_no,

    'S_PERM_GUEST_YES' =&gt; $contact_auth_guest_yes,
    'S_PERM_GUEST_NO' =&gt; $contact_auth_guest_no,
    'S_PERM_USER_YES' =&gt; $contact_auth_user_yes,
    'S_PERM_USER_NO' =&gt; $contact_auth_user_no,
    'S_PERM_MOD_YES' =&gt; $contact_auth_mod_yes,
    'S_PERM_MOD_NO' =&gt; $contact_auth_mod_no,
    'S_PERM_ADMIN_YES' =&gt; $contact_auth_admin_yes,
    'S_PERM_ADMIN_NO' =&gt; $contact_auth_admin_no,

    'S_REQUIRE_RNAME_YES' =&gt; $require_rname_yes,
    'S_REQUIRE_RNAME_NO' =&gt; $require_rname_no,
    'S_REQUIRE_EMAIL_YES' =&gt; $require_email_yes,
    'S_REQUIRE_EMAIL_NO' =&gt; $require_email_no,
    'S_REQUIRE_COMMENTS_YES' =&gt; $require_comments_yes,
    'S_REQUIRE_COMMENTS_NO' =&gt; $require_comments_no,
    'S_PERMIT_ATTACHMENTS_YES' =&gt; $permit_attachments_yes,
    'S_PERMIT_ATTACHMENTS_NO' =&gt; $permit_attachments_no)
);

if(extension_loaded('gd'))
{
    $template-&gt;assign_block_vars('captcha_config', array());
}

$template-&gt;pparse('body');
<a name="diff" id="c10"><span class="HDDeleted">
</span></a>include('./page_footer_admin.'.$phpEx);

?&gt;</span>
</pre>
</body>
<SCRIPT LANGUAGE="JavaScript" TYPE="text/javascript">
<!--
var newWind;
function putJumpCode(){
	var cnt = 11;
	newWind.document.write('<html>\n');
	newWind.document.write('<title>HtmlDiff Navigation</title>\n');
	newWind.document.write('<body>\n');
	newWind.document.write('<form name="jump">\n');
	newWind.document.write('<input type="button" value=" |&lt; " name="First" onclick=goto_first(this.form)>&nbsp;')
	newWind.document.write('<input type="button" value=" &lt; " name="Prev" onclick=goto_prev(this.form)>&nbsp;&nbsp;\n');
	newWind.document.write('<select name=url onchange=menu_goto(this.form)> \n');
	for (var i=0; i<cnt ;i++ ) {
		newWind.document.write('<option value="#c'+i+'">Change #'+(i+1)+ '</option> \n');
		}
	newWind.document.write('');
	newWind.document.write('</select>&nbsp;&nbsp;\n');
	newWind.document.write('<input type="button" value=" &gt; " name="Next"\n');
	newWind.document.write('onclick=goto_next(this.form)>\n');
	newWind.document.write('<input type="button" value=" &gt| " name="Last"\n');
	newWind.document.write('onclick=goto_last(this.form)>\n');
	newWind.document.write('</form>\n');
	newWind.document.write('');
	newWind.document.write('<form method="POST">\n');
	newWind.document.write('<p align="center"><i><font size="3">Generated\n');
	newWind.document.write('by <a href="http://www.ComponentSoftware.com/products/htmldiff" target="_blank">HtmlDiff</a> \n');
	newWind.document.write('</form>\n');
	newWind.document.write('</body>\n');
	newWind.document.write('</html>\n');
	newWind.document.write('<SCRIPT LANGUAGE="JavaScript" TYPE="text/javascript">\n');
	newWind.document.write('<!--\n');
	newWind.document.write('');
	newWind.document.write('var directCloseFlag=1;\n');
	newWind.document.write('');
	newWind.document.write('function menu_goto( menuform )\n');
	newWind.document.write('{\n');
	newWind.document.write('  var baseurl = opener.location.href ;\n');
	newWind.document.write('  var idx = baseurl.indexOf("#");\n');
	newWind.document.write('  if (idx > -1) {\n');
	newWind.document.write('	baseurl = baseurl.slice(0, idx);\n');
	newWind.document.write('  }');
	newWind.document.write('  selecteditem = menuform.url.selectedIndex ;\n');
	newWind.document.write('  newurl = menuform.url.options[ selecteditem ].value ;\n');
	newWind.document.write('  if (newurl.length != 0) {\n');
	newWind.document.write('    	opener.top.location.href = baseurl + newurl ;\n');
	newWind.document.write('  }');
	newWind.document.write('}');
	newWind.document.write('');
	newWind.document.write('function goto_prev( menuform )\n');
	newWind.document.write('{\n');
	newWind.document.write('	if(menuform.url.selectedIndex>0) menuform.url.selectedIndex--;\n');
	newWind.document.write('	menu_goto( menuform )\n');
	newWind.document.write('}');
	newWind.document.write('');
	newWind.document.write('function goto_first( menuform )\n');
	newWind.document.write('{\n');
	newWind.document.write('	menuform.url.selectedIndex = 0;	\n');
	newWind.document.write('	menu_goto( menuform );\n');
	newWind.document.write('}');
	newWind.document.write('');
	newWind.document.write('function goto_last( menuform )\n');
	newWind.document.write('{\n');
	newWind.document.write('	menuform.url.selectedIndex = menuform.url.options.length-1;	\n');
	newWind.document.write('	menu_goto( menuform );\n');
	newWind.document.write('}');
	newWind.document.write('');
	newWind.document.write('function goto_next( menuform )\n');
	newWind.document.write('{\n');
	newWind.document.write('	if(menuform.url.options.length > (menuform.url.selectedIndex+1))\n');
	newWind.document.write('	menuform.url.selectedIndex++;\n');
	newWind.document.write('	menu_goto( menuform )\n');
	newWind.document.write('}');
	newWind.document.write('');
	newWind.document.write('function restore()\n');
	newWind.document.write('{\n');
	newWind.document.write('    	focus();\n');
	newWind.document.write('	menu_goto(jump);\n');
	newWind.document.write('}');
	newWind.document.write('');
	newWind.document.write('goto_first(jump)\n');
	newWind.document.write('//-->\n');
	newWind.document.write('<');
	newWind.document.write('/SCRIPT>\n');
}
function pop_navigate(){
var isOpen = false
try {
isOpen = (newWind != null) && (!newWind.closed)
} catch (e) {}
  if (!isOpen) {
    newWind =  window.open("" ,"HtmlDiffJumpWindow","width=270,height=40")
    if (newWind.opener == null) { // for Nav 2.0x
      newWind.opener = self // this creates and sets a new prop
    }	putJumpCode();
  
} 
else 
{	newWind.execScript("restore()", "JavaScript");
  }
}
function exit(){
var isOpen = false
try {
isOpen = (newWind != null) && (!newWind.closed)
} catch (e) {}
if (isOpen) {
	newWind.close();
  }
}
//--></SCRIPT></html>
