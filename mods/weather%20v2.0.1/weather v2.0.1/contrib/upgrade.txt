############################################################## ## MOD Title:		Current Local Weather w/10 day forecast & PCP Integration## MOD Author: GroovePlugs < Francis@michaellewismusic.com > (Francis Lewis) http://michaellewismusic.com/forum## MOD Description:	This is to upgrade from version 1.3.2#### MOD Version:		2.0.1## ## Installation Level: 	Intermediate## Installation Time:  	25 Minutes, 1 with easymod ## Files To Edit: 0	## Included Files: 	##			admin/avc_mods/avc_weather.php##			includes/weather.php## License: http://opensource.org/licenses/gpl-license.php GNU General Public License v2 ################################################################ For security purposes, please check: http://www.phpbb.com/mods/## for the latest version of this MOD. Although MODs are checked## before being allowed in the MODs Database there is no guarantee## that there are no security problems within the MOD. No support## will be given for MODs not found within the MODs Database which## can be found at http://www.phpbb.com/mods/################################################################ Author Notes: ## ##   Copyright 2005 © Handyman.####	This is only an upgrade from weather v1.3.2 to v2.0.0##	There is a lot of replace code to bring this to uniformity for future versions.####  I will not be able to offer support on any forum except for mine and##  phpbb http://phpbb.com##  "http://michaellewismusic.com/forum" as I don't have time to check the##  other forums.####  Thanks. Have fun and God Bless.##  http://michaellewismusic.com/pope (tribute to the great Pope John Paul##  II)####  This mod utilizes the "Advanced Version Check" mod, the latest version##  can be found here. http://www.phpbb.com/phpBB/viewtopic.php?t=277654################################################################ MOD History:####     2005-04-30  - Version 1.0.0##          - Original release####     2005-05-25  - Version 1.1##	    - Fixed the code to be compatible with heavily modded boards####     2005-6-28   - Version 1.2##	    - Fixed code to be compatible with different languages####     2005-7-11   - Version 1.3##	    - Fixed some bugs in the city selector and the popups.####     2005-7-23   - Version 1.3.1##	    - Fixed some not critical code in the install file.####     2005-8-17   - Version 1.3.2##	    - Fixed an error PCP only. (see the PCP install file for##	      details) And made the install file more compatible with##	      Heavily modded boards####     2005-12-26  - Version 2.0##	    - Now using Weather.com##		- Utilizing "Advanced Version Check" for updates to this mod####  	2006-1-5	- Version 2.0.0##		- Updated Install Files
##
##  	2006-1-31	- Version 2.0.1##		- Fixed a few errors in the install file and in
##		includes/weather.php############################################################## ## Before Adding This MOD To Your Forum, You Should Back Up All Files Related To This MOD############################################################### #-----[ COPY ]------------------------------------------ #copy admin/avc_mods/avc_weather.php to admin/avc_mods/avc_weather.phpcopy includes/weather.php to includes/weather.php# #-----[ OPEN ]------------------------------------------ #language/lang_english/lang_main.php# #-----[ FIND ]------------------------------------------ #$lang['zip_code'] = 'Weather City Code';$lang['zip_code_viewable'] = '[This is <b>NOT</b> publicly viewable.]';$lang['forecast'] = 'Your Local Forecast';$lang['select_city'] = 'Select Your City';$lang['withheld'] = 'Withheld';$lang['no_city_selected'] = 'No City Selected';// This is for the Weather Popup's$lang['Popup_Title'] = 'Select your city';$lang['Select_your_city'] = 'Select your city by picking one of the links below';$lang['City_name_begins_with'] = 'City name begins with:';$lang['A-B'] = 'A-B';$lang['C-D'] = 'C-D';$lang['E-G'] = 'E-G';$lang['H-J'] = 'H-J';$lang['K-M'] = 'K-M';$lang['N-P'] = 'N-P';$lang['Q-S'] = 'Q-S';$lang['T-Z'] = 'T-Z';# #-----[ REPLACE WITH ]------------------------------------------ #$lang['zip_code'] = 'Zipcode';$lang['zip_code_viewable'] = '[This is <b>NOT</b> publicly viewable.]';$lang['forecast'] = 'Your Local Forecast';$lang['withheld'] = 'Withheld';$lang['no_city_selected'] = 'No City Selected';$lang['no_city_selected'] = '<a href="http://michaellewismusic.com" target="_blank">No City Selected<br />For Help, visit the forums at http://michaellewismusic.com/forum</a>';$lang['Current_Conditions'] = 'Weather by <a href="http://michaellewismusic.com" parent="_blank">http://michaellewismusic.com</a>';# #-----[ OPEN ]------------------------------------------ #templates/subSilver/admin/user_edit_body.tpl# #-----[ FIND ]------------------------------------------ # <script>function spawn() {x=(screen.width/2)-225;y=(screen.height/2)-200;window.open('{U_POPUP}','test','left=' + x + ',top=' + y +',screenX=x,screenY=y,toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,copyhistory=no,width=450,height=400')}</script># #-----[ REPLACE WITH ]------------------------------------------ # <!-- Deleted weather popup //--> # #-----[ FIND ]------------------------------------------ # <form action="{S_PROFILE_ACTION}" {S_FORM_ENCTYPE} method="post" name="myform"># #-----[ IN-LINE FIND ]------------------------------------------ # method="post" name="myform"# #-----[ IN-LINE REPLACE WITH ]------------------------------------------ # method="post"# #-----[ FIND ]------------------------------------------ # 	<tr>		<td class="row1" width="38%"><span class="gen">{L_ZIPCODE}: *</span></td>		<td class="row2">		<input type="text" name="zipcode" size="25" maxlength="50" value="{ZIPCODE}" /> <span class="gensmall"><a href="javascript:void(0);" onclick="spawn();">{L_SELECT_CITY}</a></span>		</td>	</tr># #-----[ REPLACE WITH ]------------------------------------------ # 	<tr>		<td class="row1" width="38%"><span class="gen">{L_ZIPCODE}:</span></td>		<td class="row2">		<input type="text" name="zipcode" size="25" maxlength="50" value="{ZIPCODE}" />		</td>	</tr># #-----[ OPEN ]------------------------------------------ #templates/subSilver/profile_add_body.tpl# #-----[ FIND ]------------------------------------------ # <form action="{S_PROFILE_ACTION}" {S_FORM_ENCTYPE} method="post" name="myform"># #-----[ IN-LINE FIND ]------------------------------------------ # method="post" name="myform"# #-----[ IN-LINE REPLACE WITH ]------------------------------------------ # method="post"# #-----[ FIND ]------------------------------------------ # 	<tr>		<td class="row1"><span class="gen">{L_ZIPCODE}: </span><span class="gensmall">{L_ZIPCODE_VIEWABLE}</span></td>		<td class="row2"><input type="text" class="post" style="width:200px" name="zipcode" size="25" maxlength="10" value="{ZIPCODE}" /> <span class="gensmall"><a href="javascript:void(0);" onclick="spawn();">{L_SELECT_CITY}</a></span></td>	</tr># #-----[ REPLACE WITH ]------------------------------------------ #	<tr>		<td class="row1"><span class="gen">{L_ZIPCODE}: </span><span class="gensmall">{L_ZIPCODE_VIEWABLE}</span></td>		<td class="row2"><input type="text" class="post" style="width:200px" name="zipcode" size="25" maxlength="10" value="{ZIPCODE}" /></td>	</tr># #-----[ FIND ]------------------------------------------ # <script>function spawn() {x=(screen.width/2)-225;y=(screen.height/2)-200;window.open('{U_POPUP}','test','left=' + x + ',top=' + y +',screenX=x,screenY=y,toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,copyhistory=no,width=450,height=400')}</script># #-----[ REPLACE WITH ]------------------------------------------ #<!-- Deleted weather popup //--># #-----[ OPEN ]------------------------------------------ #admin/admin_users.php# #-----[ FIND ]------------------------------------------ #$zipcode = stripslashes($zipcode);# #-----[ REPLACE WITH ]------------------------------------------ #$zipcode = htmlspecialchars(stripslashes($zipcode));# #-----[ FIND ]------------------------------------------ #$zipcode = stripslashes($zipcode);# #-----[ REPLACE WITH ]------------------------------------------ #$zipcode = htmlspecialchars(stripslashes($zipcode));# #-----[ FIND ]------------------------------------------ # 'U_POPUP' => append_sid($phpbb_root_path . 'popup.'.$phpEx),# #-----[ REPLACE WITH ]------------------------------------------ #// removed weather popup# #-----[ OPEN ]------------------------------------------ #includes/usercp_register.php# #-----[ FIND ]------------------------------------------ #		'L_ZIPCODE' => $lang['zip_code'],		'L_ZIPCODE_VIEWABLE' => $lang['zip_code_viewable'],		'L_SELECT_CITY' => $lang['select_city'],# #-----[ REPLACE WITH ]------------------------------------------ #		'L_ZIPCODE' => $lang['zip_code'],		'L_ZIPCODE_VIEWABLE' => $lang['zip_code_viewable'],# #-----[ FIND ]------------------------------------------ #'S_PROFILE_ACTION' => append_sid("profile.$phpEx"),'U_POPUP' => append_sid($phpbb_root_path . 'popup.'.$phpEx)# #-----[ REPLACE WITH ]------------------------------------------ #'S_PROFILE_ACTION' => append_sid("profile.$phpEx")##-----[ OPEN ]------------------------------------------ #templates/subSilver/index_body.tpl# #-----[ FIND ]------------------------------------------ #<!-- BEGIN switch_user_logged_in --><link rel="stylesheet" href="{CURRENT_STYLE}/weather.css" type="text/css"><table width=100% align=center cellpadding="3" cellspacing="1" border="0" class="forumline"><tr><td class="catHead" height="28"><span class="cattitle">{L_FORECAST}</span></td></tr><tr><td width=100% class="row1" align="center" valign="middle" height="28"><!-- // WEATHER MOD // --><table><tr>{MY_WEATHER}</tr></table><!-- // WEATHER MOD // --><link rel="stylesheet" href="{CURRENT_STYLE}/{T_HEAD_STYLESHEET}" type="text/css" /></td></tr></table><!-- END switch_user_logged_in --># #-----[ REPLACE WITH ]------------------------------------------ #<!-- BEGIN switch_user_logged_in --><table width=100% align=center cellpadding="3" cellspacing="1" border="0" class="forumline"><tr><td class="catHead" height="28"><span class="cattitle">{L_FORECAST}</span></td></tr><tr><td width=100% class="row1" align="center" valign="middle" height="28"><!-- // WEATHER MOD // --><table><tr>{MY_WEATHER}</tr></table><!-- // WEATHER MOD // --></td></tr></table><!-- END switch_user_logged_in --><!-- BEGIN switch_user_logged_out --><table class="forumline"><tr><td class="catHead">{L_CURRENT_CONDITIONS}</td></tr></table><!-- END switch_user_logged_out --># #-----[ OPEN ]------------------------------------------ #index.php# #-----[ FIND ]------------------------------------------ #// WEATHER MODrequire($phpbb_root_path . 'includes/weather.'.$phpEx);// WEATHER MOD# #-----[ REPLACE WITH ]------------------------------------------ #// start weather modrequire($phpbb_root_path . 'includes/weather.'.$phpEx);// start weather mod# #-----[ FIND ]------------------------------------------ #	//	$zip_code = $userdata['user_zipcode'];	//# #-----[ REPLACE WITH ]------------------------------------------ #// start weather mod$zip_code = $userdata['user_zipcode'];// end weather mod# #-----[ FIND ]------------------------------------------ #		'FORUM_LOCKED_IMG' => $images['forum_locked'],# #-----[ AFTER, ADD ]------------------------------------------ # 		'ZIPCODE' => $zip_code,		// WEATHER MOD		'MY_WEATHER' => weather($zip_code),		// WEATHER MOD		'L_FORECAST' => $lang['forecast'],# #-----[ SAVE/CLOSE ALL FILES ]------------------------------------------ # # EoM