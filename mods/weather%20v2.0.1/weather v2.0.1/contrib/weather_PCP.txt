################################################################ MOD Title: Current Local Weather part 2 for PCP## MOD Author: GroovePlugs < Francis@michaellewismusic.com > (Francis Lewis) http://michaellewismusic.com/forum## MOD Description: 	This mod allows registered users to pick a city from within their profile and##			have the current and 10 day forecast displayed on the main phpbb page. If no city##			is selected or an invalid code is entered, then no weather is displayed. Guests##			see nothing. This mod also allows the admin to view what code a user has chosen##			through user management in the admin page.## MOD Version:		2.0.1#### Installation Level:	Intermediate## Installation Time:	5 Minutes## Files To Edit:## 			lang_english/lang_extend_profile_control_panel.php## 			profilcp/profilcp_register.php## 			profilcp/def/def_userfields.php## 			profilcp/def/def_usermaps.php## 			templates/subSilver/profilcp/register_body.tpl## Included Files:## License: http://opensource.org/licenses/gpl-license.php GNU General Public License v2 ################################################################ For security purposes, please check: http://www.phpbb.com/mods/## for the latest version of this MOD. Although MODs are checked## before being allowed in the MODs Database there is no guarantee## that there are no security problems within the MOD. No support## will be given for MODs not found within the MODs Database which## can be found at http://www.phpbb.com/mods/################################################################ Author Notes: ## ##   Copyright 2005 © Handyman.####  This mod will create a new field in your users table, Registering table##  (for PCP only).##  Registered members will see one of two things. Either "No City##  Selected" or their weather. Users can modify their city code via their##  profile and admins can edit them in the User Admin Management page. I##  have made the zipcodes hidden to everyone (except the admin) when you##  look at another user's profile. I don't think that should be public. As##  I designed this mod, only the main index.php##  page shows the weather. This can be altered, however, I don't think##  users would want to see their weather on every page.##  This version uses weather.com####  I will not be able to offer support on any forum except for mine and##  phpbb http://phpbb.com##  "http://michaellewismusic.com/forum" as I don't have time to check the##  other forums.####  Thanks. Have fun and God Bless.##  http://michaellewismusic.com/pope (tribute to the great Pope John Paul##  II)####  This mod utilizes the "Advanced Version Check" mod, the latest version##  can be found here. http://www.phpbb.com/phpBB/viewtopic.php?t=277654################################################################ MOD History:####     2005-04-30  - Version 1.0.0##          - Original release####     2005-05-25  - Version 1.1##	    - Fixed the code to be compatible with heavily modded boards####     2005-6-28   - Version 1.2##	    - Fixed code to be compatible with different languages####     2005-7-11   - Version 1.3##	    - Fixed some bugs in the city selector and the popups.####     2005-7-23   - Version 1.3.1##	    - Fixed some not critical code in the install file.####     2005-8-17   - Version 1.3.2##	    - Fixed an error PCP only. (see the PCP install file for##	      details) And made the install file more compatible with##	      Heavily modded boards####	2005-12-26	- Version 2.0##		- Changed to weather.com for the current conditions and ##		now a 10 day forecast instead of 5.##		- Added Advanced Version Check####  2006-1-5	- Version 2.0.0##		- Updated Install Files##
##  	2006-1-31	- Version 2.0.1##		- Fixed a few errors in the install file and in
##		includes/weather.php################################################################ Before Adding This MOD To Your Forum, You Should Back Up All Files Related To This MOD################################################################-----[ OPEN ]------------------------------------------#profilcp/profilcp_register.php##-----[ FIND ]------------------------------------------#$view_userdata['user_email'] = '';##-----[ AFTER, ADD ]------------------------------------------#$view_userdata['user_zipcode'] = '';##-----[ FIND ]------------------------------------------#$user_email_confirm = trim(htmlspecialchars($HTTP_POST_VARS['user_email_confirm']));##-----[ AFTER, ADD ]------------------------------------------#$zipcode = trim(htmlspecialchars($HTTP_POST_VARS['zipcode']));##-----[ FIND ]------------------------------------------#$error_msg .= ( ( isset($error_msg) ) ? '<br />' : '' ) . $lang['Robot_flood_control'];	}##-----[ AFTER, ADD ]------------------------------------------#// Start Zipcode Check by Handyman (Francis Lewis)	// zipcode	$zipcode_changed = false;	$zipcode_error = false;	// create : zipcode should be set	if ( $create_user && empty($zipcode) )	{		$zipcode_error = true;		$error = true;		$error_msg .= ( ( isset($error_msg) ) ? '<br />' : '' ) . $lang['Fields_empty'];	}	// edit : check if a zipcode has been set	if ( !empty($zipcode) )	{		if (!$zipcode_error)		{			$zipcode_changed = true;		}	}// End Zipcode Check by Handyman (Francis Lewis)##-----[ FIND ]------------------------------------------#if ( $password_changed ) $values['user_password'] = $new_password;##-----[ AFTER, ADD ]------------------------------------------#if ( $zipcode_changed )	 $values['user_zipcode'] = $zipcode;##-----[ FIND ]------------------------------------------#'L_PASSWORD_CONFIRM_IF_CHANGED'	=> $lang['password_confirm_if_changed'],##-----[ AFTER, ADD ]------------------------------------------#'L_ZIPCODE' => $lang['Zipcode'],'L_ZIPCODE_VIEWABLE' => $lang['Zipcode_Viewable'],##-----[ FIND ]------------------------------------------#'EMAIL_CONFIRM'		=> $view_userdata['user_email'],##-----[ AFTER, ADD ]------------------------------------------#'ZIPCODE'			=> $view_userdata['user_zipcode'],##-----[ OPEN ]------------------------------------------#templates/subSilver/profilcp/register_body.tpl##-----[ FIND ]------------------------------------------#<input type="password" class="post" style="width: 200px" name="password_confirm" size="25" maxlength="100" value="{PASSWORD_CONFIRM}" />			</td>		</tr>##-----[ AFTER, ADD ]------------------------------------------#<tr><td class="row1"><span class="gen">{L_ZIPCODE}:</span><br /><span class="gensmall">{L_ZIPCODE_VIEWABLE}</span></td><td class="row2"><input type="text" class="post" style="width:200px" name="zipcode" size="25" maxlength="10" value="{ZIPCODE}" /></td></tr>##-----[ OPEN ]------------------------------------------#language/lang_english/lang_extend_profile_control_panel.php##-----[ FIND ]------------------------------------------# the actual line is longer$lang['Disagree_rules']##-----[ AFTER, ADD ]------------------------------------------#$lang['Zipcode'] = 'Zipcode';$lang['Zipcode_Viewable'] = 'Type in your zipcode to have your Local Forecast appear at the bottom of the forum index [This is not Publicly Viewable]';##-----[ SAVE/CLOSE ALL FILES ]------------------------------------------## EoM