<?xml version="1.0" encoding="utf-8" standalone="yes"?><?xml-stylesheet type="text/xsl" href="modx.fountainofapples.en.xsl"?><!--For security purposes, please check: http://www.phpbb.com/mods/ for the latest version of this MOD. Although MODs are checked before being allowed in the MODs Database there is no guarantee that there are no security problems within the MOD. No support will be given for MODs not found within the MODs Database which can be found at http://www.phpbb.com/mods/--><mod xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.phpbb.com/mods/xml/modx-1.0.xsd">	<header>		<license>http://opensource.org/licenses/gpl-license.php GNU General Public License v2</license>		<title lang="en-gb">Advanced Version Check - Part 1</title>		<description lang="en-gb"><![CDATA[Adds a Version Check system to phpBB that checks for the latest version of phpBB and various other phpBB MODs that may be installed.]]></description>		<author-notes lang="en-gb"><![CDATA[This MOD replaces the phpBB Version Checker with a brand new version check system that can find the latest version of any MOD that supports it, and notify administrators when a MOD has been updated.TWO-PART INSTALLATION:You are currently viewing Part 1 of the MOD's installation. Part 1 is required for all installations of Advanced Version Check. Part 2 is required if you are using versions 2.1.1-2.1.4 of Ptirhiik's Categories Hierarchy MOD. Install it IMMEDIATELY after installing Part 1.ADVANCED VERSION CHECK IS NOT COMPATIBLE WITH PHPBB RELEASES PRIOR TO PHPBB 2.0.19! If you are not using 2.0.19 or later, update NOW.Advanced Version Check is NOT compatible with Categories Hierarchy 2.1.5; only CH 2.1.1-2.1.4. The Version Checking methods are adjusted in CH 2.1.5, and Ptirhiik intends for CH 2.1.5 to be strictly a development line. The next major release of AVC, AVC 3.2.0, will support CH 2.1.6.

MODX TEMPLATE:
You are currently viewing the MODX Template version of Advanced Version Check. Note that at the time of writing, EasyMOD is not compatible with the MODX Template. Installation files that are EasyMOD-compatible can be found in the contrib/easymod_installation/ directory. These files will need to be moved to the root directory of the MOD (the same directory this file is found) before you upload the MOD and install with EasyMOD! Failure to do this will cause the EasyMOD installation to fail.

LICENSE:
Advanced Version Check is released under the GNU General Public License, either version 2 or (at your option) any later version. By installing this MOD, you state that you agree to the terms laid out in the license and will abide by them. A copy of the license can be found at docs/LICENSE.txt.

Advanced Version Check is Copyright 2005-2006 Douglas Bell.HOW TO USE:AVC documentation can be found in docs/userguide.txt in this zip.CONTRIBUTIONS:Thanks to DemonBob < http://www.systemoverload.net > who helped out as secondary MOD author during the 1.1.x and 2.0.x release lines, and who contributed most of the code during those release lines. Much of it has also been passed onto AVC 3.
The JavaScript for the admin_version.php interface was borrowed from the Admin Userlist MOD by wGEric < http://www.phpbb.com/phpBB/viewtopic.php?t=117359 >.Thanks to Ptirhiik < http://ptifo.clanmckeen.com > for giving me advice with the Categories Hierarchy integration!The xml class script was designed by the phpBB Support Team and is used with permission. < http://www.phpbb.com/about/#7330 >Thanks so much to my colleagues on the phpBB Group who have helped out with debugging AVC.The Version Check Notification utilizes phpBB's emailer() class (included within phpBB), an adaptation of netclectic's insert_post() function, and an adaptation of wGEric's insert_pm() function.The AVC Install script is adapted from markus_petrux's SQL Parser < http://sql.phpmix.com >.MOD AUTHORS:If you want to add an AVC 3-compatible version checker to your MOD, it's really easy! Seriously! The guide and the files you need are in the avc_mod-authors/ directory in the docs/ directory in this zip, and it literally takes as little as 5 minutes to set up.UPDATES:
No updates are provided from previous release lines of Advanced Version Check, because there are overwhelming changes from previous releases. Updates for releases since 2.1.3 can be found in the updates/ directory.DOWNLOAD & SUPPORT:Support is available at this MOD's topic at phpBB.com < http://www.phpbb.com/phpBB/viewtopic.php?t=277654 >. The MOD can also be downloaded from my site at < http://foamods.sourceforge.net >. At that page, you can also view the MOD's Subversion repository, and can subscribe to its mailing list.]]></author-notes>		<author-group>			<author>				<realname>Douglas Bell</realname>				<email>webmacster87@gmail.com</email>				<username>Fountain of Apples</username>				<homepage>http://foamods.sourceforge.net</homepage>			</author>		</author-group>		<mod-version>			<major>3</major>			<minor>0</minor>			<revision>6</revision>		</mod-version>		<installation>			<level>easy</level>			<time>300</time>			<target-version>				<target-primary>2.0</target-primary>				<target-major allow="exact">2</target-major>				<target-minor allow="exact">0</target-minor>			</target-version>		</installation>		<history>
			<entry>
				<date>2006-04-29</date>
				<rev-version>
					<major>3</major>
					<minor>0</minor>
					<revision>6</revision>
				</rev-version>
				<changelog lang="en-gb">
					<change>Fixed PHP Syntax Errors in admin_version_mange.php and admin_version_log.php (Wingman69 of phpBB.com).</change>
					<change>Renamed the XML class AVC uses to try to improve compatibility with other MODs which may use this class.</change>
				</changelog>
			</entry>
			<entry>
				<date>2006-04-28</date>
				<rev-version>
					<major>3</major>
					<minor>0</minor>
					<revision>5</revision>
					<release>a</release>
				</rev-version>
				<changelog lang="en-gb">
					<change>A few MODX Template fixes (add some needed lang attributes).</change>
					<change>Updated the FOA XSL to display the correct Security Disclaimer.</change>
				</changelog>
			</entry>
			<entry>
				<date>2006-04-22</date>
				<rev-version>
					<major>3</major>
					<minor>0</minor>
					<revision>5</revision>
				</rev-version>
				<changelog lang="en-gb">
					<change>AVC now uses the new MODX template. A version with the Text Template is still maintained in the contrib/ directory.</change>
					<change>AVC version checker has been updated to reflect a new retrievable file location. The old one will still work for a while but will eventually be taken down.</change>
					<change>Updated Author Notes.</change>
					<change>MOD History in the MOD installation files has been truncated to only releases since 2.1.0; full MOD history can be found in docs/history.txt.</change>
					<change>Updated the AVC MOD Authors guide with some revised info and a new theme.</change>
					<change>AVC MOD Authors guide is no longer a separate download and is now included in the docs/ directory.</change>
					<change><![CDATA[Added "X occurred successfully" boxes to various AVC panels that were lacking them to make them more "phpBB-like."]]></change>
					<change>A copy of the GNU General Public License is now included with the MOD; see docs/LICENSE.txt.</change>
					<change>Updated docs/userguide.txt with some Frequently Asked Questions from the support topic on phpBB.com.</change>
					<change>Added a new readme.txt file to answer some basic questions and serve as a guide for the layout of this zip.</change>
				</changelog>
			</entry>			<entry>				<date>2006-04-07</date>				<rev-version>					<major>3</major>					<minor>0</minor>					<revision>4</revision>				</rev-version>				<changelog lang="en-gb">					<change><![CDATA[Fixed a "cannot initiate non-existant class: emailer" error that could be caused if the AVC VCNS e-mail option was on.]]></change>					<change>MOD tested to work with phpBB 2.0.20.</change>				</changelog>			</entry>			<entry>				<date>2006-03-13</date>				<rev-version>					<major>3</major>					<minor>0</minor>					<revision>3</revision>				</rev-version>				<changelog lang="en-gb">					<change>Renamed insert_pm and insert_post functions to improve compatibility with other MODs using these functions.</change>					<change><![CDATA[Fixed an "undefined variable" PHP5 error in admin/index.php (nTE of phpBB.com).]]></change>					<change>Additional fixes/suggestions from the MOD team, which are as follows:</change>					<change><![CDATA[For a better impact, the MOD error line now uses <strong>.]]></change>					<change>phpBB Version only updates if needed.</change>					<change>Fixed a typo in templates/subSilver/admin/version_config.tpl.</change>				</changelog>			</entry>			<entry>				<date>2006-02-04</date>				<rev-version>					<major>3</major>					<minor>0</minor>					<revision>2</revision>				</rev-version>				<changelog lang="en-gb">					<change>Removed some includes that were calling invalid files (the files were removed in 3.0.1 / thanks to x-men of phpBB.com).</change>					<change>Fixed an instance where the AVC e-mail wouldn't send in some cases.</change>					<change>Translated a few more lines that weren't properly translated last time.</change>				</changelog>			</entry>			<entry>				<date>2006-02-03</date>				<rev-version>					<major>3</major>					<minor>0</minor>					<revision>1</revision>				</rev-version>				<changelog lang="en-gb">					<change>Fixed a syntax error in language/lang_english/lang_avc.php (thanks to shirleycaat and whozyodaddy of phpBB.com).</change>					<change>Fixed incorrect AVC version number.</change>					<change> All external functions from other authors have been moved into includes/functions_avc.php.</change>					<change>The function replace_htmlspecialchars() has now been replaced with a fully-featured, dedicated htmlspecialchars_decode() wrapper.</change>					<change>The insert_post() function (by netclectic) now cleans the username by using phpbb_clean_username() (the original function was released before phpbb_clean_username() was added in 2.0.11)</change>					<change>Fixed a possible SQL injection via the Subject line in insert_post() (not possible to occur with AVC, since AVC uses a fixed subject, but better safe than sorry).</change>					<change>Removed some unnecessary code from the admin files.</change>					<change>Fixed some incorrectly called $db-&gt;sql_freeresult() statements in includes/constants_avc.php.</change>				</changelog>			</entry>			<entry>				<date>2006-01-09</date>				<rev-version>					<major>3</major>					<minor>0</minor>					<revision>0</revision>				</rev-version>				<changelog lang="en-gb">					<change>Removed all remaining occurrences of hard-coded English.</change>					<change>Completed MOD documentation.</change>				</changelog>			</entry>			<entry>				<date>2006-01-06</date>				<rev-version>					<major>2</major>					<minor>1</minor>					<revision>5</revision>				</rev-version>				<changelog lang="en-gb">					<change>XML Retrievable file can now contain Author's Notes for a released MOD.</change>					<change>Implementation of new AVC Update Log.</change>					<change>New Enable/Disable Checkers Page which is more efficient and has a more organized design.</change>					<change>Completion of new XML Retrievable File documentation; see http://mods.webmacster87.info for download.</change>					<change>AVC now allows extra characters in the version number, for example &quot;1.0.2a&quot; or &quot;2.4.0 RC-1&quot;. These characters are ignored by AVC.</change>					<change>New installation script to aid with installation of AVC provided. Script is compatible with MySQL, PostgreSQL, and Microsoft SQL.</change>					<change>Fixed an SQL Error 1170.</change>					<change>Added the use of freeresult to reduce server memory usage.</change>					<change>Other minor bug fixes.</change>					<change>Fixed an error in editing common.php with Categories Hierarchy -- This has been accomplished by moving the added code around.</change>					<change>Fixed an invalid FIND (occurring in phpBB 2.0.19) in common.php.</change>					<change>Rewrote the code used to remove orphaned MODs from the Version Check table in includes/constants_avc.php.</change>					<change>Fixed a variety of errors with CH 2.1.4 compatibility. AVC now fully works with CH 2.1.4 (however is not compatible with CH 2.1.5).</change>					<change>Per suggestion of Ptirhiik, if CH is installed, AVC admin panels now utilize CH's authorization checking methods.</change>				</changelog>			</entry>			<entry>				<date>2005-12-29</date>				<rev-version>					<major>2</major>					<minor>1</minor>					<revision>4</revision>				</rev-version>				<changelog lang="en-gb">					<change>Implementation of the Version Check Notification System.</change>					<change>Brand new Version Check Configuration page.</change>					<change>New phpBB Version/Version Check Data under Admin Index Statistics (borrowed/modified from Advanced Version Check 1.0.1).</change>					<change>Admin Index Summary code now moved into a function.</change>					<change>Made some minor edits to the SQL to be compatible with MySQL 5.</change>					<change>Made some minor edits to the SQL to prevent warnings being displayed with EasyMOD's SQL parser.</change>					<change>Adjustments in templates/subSilver/admin/index_body.tpl to provide compatibility with phpBB 2.0.19. Support for phpBB releases prior to 2.0.19 has been dropped.</change>				</changelog>			</entry>			<entry>				<date>2005-12-17</date>				<rev-version>					<major>2</major>					<minor>1</minor>					<revision>3</revision>				</rev-version>				<changelog lang="en-gb">					<change>AVC 2, phpBB, and Categories Hierarchy version checker methods reimplemented.</change>					<change>Overall completion of the code overhaul.</change>				</changelog>			</entry>			<entry>				<date>2005-12-10</date>				<rev-version>					<major>2</major>					<minor>1</minor>					<revision>2</revision>				</rev-version>				<changelog lang="en-gb">					<change>Implementation of the new XML retrievable file.</change>					<change>First part of the code overhaul.</change>					<change>Temporary removal of AVC 2 version checker methods.</change>					<change>Completion on the new Version Check page interface.</change>				</changelog>			</entry>			<entry>				<date>2005-11-19</date>				<rev-version>					<major>2</major>					<minor>1</minor>					<revision>1</revision>				</rev-version>				<changelog lang="en-gb">					<change>Implementation of the new interface of the Version Check page.</change>				</changelog>			</entry>			<entry>				<date>2005-11-13</date>				<rev-version>					<major>2</major>					<minor>1</minor>					<revision>0</revision>				</rev-version>				<changelog lang="en-gb">					<change>Added support for Ptirhiik's Categories Hierarchy MOD.</change>
					<change>For the history of prior versions, see docs/history.txt</change>				</changelog>			</entry>		</history>	</header>	<action-group>		<sql><![CDATA[CREATE TABLE phpbb_version_check (	mod_id INTEGER(10) UNSIGNED NOT NULL AUTO_INCREMENT,	mod_name VARCHAR(250) NOT NULL DEFAULT '',	mod_current_version TEXT NOT NULL DEFAULT '',	mod_new_version TEXT NOT NULL DEFAULT '',	mod_secondary_version TEXT NOT NULL DEFAULT '',	mod_domain_loc TEXT NOT NULL,	mod_file_name TEXT NOT NULL,	mod_file_loc TEXT NOT NULL,	mod_topic_loc TEXT NOT NULL DEFAULT '',	mod_download_loc TEXT NOT NULL DEFAULT '',	mod_dev_status TEXT NOT NULL DEFAULT '',	mod_error VARCHAR(250) DEFAULT '',	mod_status TINYINT(4) NOT NULL DEFAULT 1,	mod_time_stamp INTEGER(11) NOT NULL DEFAULT 0,	mod_author_notes TEXT NOT NULL DEFAULT '',	PRIMARY KEY (mod_id));INSERT INTO phpbb_version_check VALUES(1,'phpBB','','','','www.phpbb.com','20x.txt','updatecheck','http://www.phpbb.com','','','',1,0,'');CREATE TABLE phpbb_version_config (	config_name VARCHAR(255) NOT NULL,	config_value TEXT NOT NULL DEFAULT '',	PRIMARY KEY (config_name));INSERT INTO phpbb_version_config VALUES('check_time','86400');INSERT INTO phpbb_version_config VALUES('background_check',1);INSERT INTO phpbb_version_config VALUES('show_admin_index',1);INSERT INTO phpbb_version_config VALUES('update_email',0);INSERT INTO phpbb_version_config VALUES('email_address','');INSERT INTO phpbb_version_config VALUES('update_pm',0);INSERT INTO phpbb_version_config VALUES('pm_id','');INSERT INTO phpbb_version_config VALUES('update_post',0);INSERT INTO phpbb_version_config VALUES('post_forum','');INSERT INTO phpbb_version_config VALUES('post_contents','');CREATE TABLE phpbb_version_log (	log_id INTEGER(10) UNSIGNED NOT NULL AUTO_INCREMENT,	log_timestamp INTEGER(11) NOT NULL DEFAULT 0,	mod_name VARCHAR(250) NOT NULL DEFAULT '',	log_action TEXT NOT NULL DEFAULT '',	PRIMARY KEY (log_id));]]></sql>		<copy>			<file from="root/admin/admin_download_phpbb.php" to="admin/admin_download_phpbb.php" />			<file from="root/admin/avc_mods/*.*" to="admin/avc_mods/*.*" />			<file from="root/admin/admin_version.php" to="admin/admin_version.php" />			<file from="root/admin/admin_version_manage.php" to="admin/admin_version_manage.php" />			<file from="root/admin/admin_version_config.php" to="admin/admin_version_config.php" />			<file from="root/admin/admin_version_log.php" to="admin/admin_version_log.php" />			<file from="root/includes/constants_avc.php" to="includes/constants_avc.php" />			<file from="root/includes/functions_avc.php" to="includes/functions_avc.php" />			<file from="root/language/lang_english/lang_avc.php" to="root/language/lang_english/lang_avc.php" />			<file from="root/templates/subSilver/admin/avc_index_summary.tpl" to="templates/subSilver/admin/avc_index_summary.tpl" />			<file from="root/templates/subSilver/admin/avc_phpbbversion_body.tpl" to="templates/subSilver/admin/avc_phpbbversion_body.tpl" />			<file from="root/templates/subSilver/admin/download_phpbb_body.tpl" to="templates/subSilver/admin/download_phpbb_body.tpl" />			<file from="root/templates/subSilver/admin/version_manage.tpl" to="templates/subSilver/admin/version_manage.tpl" />			<file from="root/templates/subSilver/admin/version_body.tpl" to="templates/subSilver/admin/version_body.tpl" />			<file from="root/templates/subSilver/admin/version_config.tpl" to="templates/subSilver/admin/version_config.tpl" />			<file from="root/templates/subSilver/admin/version_log.tpl" to="templates/subSilver/admin/version_log.tpl" />		</copy>		<open src="common.php">			<edit>				<find><![CDATA[$board_config = array();]]></find>				<action type="after-add"><![CDATA[// MOD: Advanced Version Check$version_config = array();// END MOD: Advanced Version Check]]></action>			</edit>			<edit>				<find><![CDATA[	message_die(GENERAL_MESSAGE, 'Please_remove_install_contrib');}]]></find>				<action type="after-add"><![CDATA[// MOD: Advanced Version Checkinclude_once($phpbb_root_path . 'includes/constants_avc.'.$phpEx);// Prepare our $version_config array$sql = "SELECT *	FROM " . VERSION_CONFIG_TABLE;if( !($result = $db->sql_query($sql)) ){	message_die(GENERAL_ERROR, $lang['No_Version_Config'], "", __LINE__, __FILE__, $sql);}while ( $row = $db->sql_fetchrow($result) ){	$version_config[$row['config_name']] = $row['config_value'];}$db->sql_freeresult($result);//// If Background Checking is on, run the Version Check -- we're restricting// this one to an interval only//if ( $version_config['background_check'] || defined('IN_AVC') ){	avc_version_check();}elseif ( defined('AVC_ADMIN_INDEX') ){	if ( !$version_config['show_admin_index'] )	{		avc_one_version_check(PHPBB_MOD_ID);	}	else	{		avc_version_check();	}}// END MOD: Advanced Version Check]]></action>			</edit>		</open>		<open src="admin/index.php">			<edit>				<find><![CDATA[define('IN_PHPBB', 1);]]></find>				<action type="after-add"><![CDATA[// MOD: Advanced Version Checkdefine('AVC_ADMIN_INDEX', 1);// END MOD: Advanced Version Check]]></action>			</edit>			<edit>				<find><![CDATA[	// Check for new version]]></find>				<action type="before-add"><![CDATA[// MOD: Advanced Version Check/* The following is original phpBB code that we are removing:]]></action>			</edit>			<edit>				<find><![CDATA[		'L_VERSION_INFORMATION'	=> $lang['Version_information'])	); ]]></find>				<action type="after-add"><![CDATA[END remove */// Isn't it nice? This one function deals with the whole thing! :Pavc_display_index();// END MOD: Advanced Version Check]]></action>			</edit>		</open>		<open src="language/lang_english/lang_admin.php">			<edit>				<find><![CDATA[$lang['Restore_DB'] = ']]></find>				<action type="after-add"><![CDATA[// MOD: Advanced Version Check$lang['phpBBDownload'] = 'Download phpBB';$lang['AVC_AVersioncheck'] = 'Version Check';$lang['AVC_Enable'] = 'Enable/Disable';$lang['AVC_Log'] = 'Update Log';// END MOD: Advanced Version Check]]></action>			</edit>		</open>		<open src="templates/subSilver/admin/index_body.tpl">			<edit>				<find><![CDATA[	<td class="row2"><b>{GZIP_COMPRESSION}</b></td>
  </tr>]]></find>				<action type="after-add"><![CDATA[  {AVC_PHPBBVERSION}]]></action>			</edit>			<edit>				<find><![CDATA[<h1>{L_VERSION_INFORMATION}</h1>{VERSION_INFO}<br />]]></find>				<action type="replace-with"><![CDATA[<!-- Advanced Version Check --><!-- <h1>{L_VERSION_INFORMATION}</h1>{VERSION_INFO}<br /> -->{AVC_INDEX_SUMMARY}]]></action>			</edit>		</open>		<diy-instructions lang="en-gb"><![CDATA[If you are using Ptirhiik's Categories Hierarchy MOD (version 2.1.1 or later), immediately install Part 2 of this MOD. Your admin index will not work properly unless you install Part 2!If you are not using this MOD, you do not need to install Part 2.]]></diy-instructions>	</action-group></mod>